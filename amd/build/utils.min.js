// @license    https://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later.
define("theme_adaptable/utils",["jquery","core/log"],(function($,log){return{init:function(currentpage,tabpersistencetime){$(document).ready((function($){if("coursepage"==currentpage){var now,expiration,hasStorage="sessionStorage"in window&&window.sessionStorage,currentUrl=document.location.toString();if(hasStorage&&-1!=currentUrl.indexOf("course/view.php?id=")){var tabValues=JSON.parse(sessionStorage.getItem("tabValues"))||{},tabTimestamp=JSON.parse(sessionStorage.getItem("tabTimestamp")),$radiobuttons=$("#coursetabcontainer :radio");tabTimestamp?(now=new Date,(expiration=new Date(tabTimestamp)).setMinutes(expiration.getMinutes()+parseInt(tabpersistencetime)),now.getTime()>expiration.getTime()&&(log.debug("Expired"),sessionStorage.removeItem("tabTimestamp"),sessionStorage.removeItem("tabValues"),tabValues={}),sessionStorage.setItem("tabTimestamp",JSON.stringify(new Date))):(sessionStorage.setItem("tabTimestamp",JSON.stringify(new Date)),log.debug("Setting timestamp"));var courseid=new URL(document.location).searchParams.get("id");$radiobuttons.on("change",(function(){$radiobuttons.each((function(){this.checked&&(tabValues[courseid]=this.id)})),sessionStorage.setItem("tabValues",JSON.stringify(tabValues))}));var tabhasbeenset=!1;$.each(tabValues,(function(key,value){key==courseid&&($("#"+value).prop("checked",!0),tabhasbeenset=!0)})),0==tabhasbeenset&&$("input:radio[name=tabs]:first").attr("checked",!0),$("label.coursetab").show()}}}))}}}));

//# sourceMappingURL=utils.min.js.map