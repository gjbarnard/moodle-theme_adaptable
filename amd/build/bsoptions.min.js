// @license    https://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later.
define("theme_adaptable/bsoptions",["jquery","theme_adaptable/util","core/log"],(function($,AdaptableUtil,log){return log.debug("Adaptable Bootstrap AMD opt in functions"),{init:function(data){if($(document).ready((function($){var body=$("body"),navbar=document.getElementById("main-navbar");if(data.stickynavbar){const screenmd=992,screensm=768;var currentWindowSize,windowWidth=$(window).width();currentWindowSize=windowWidth<screensm?1:windowWidth<screenmd?2:3;var header=document.getElementById("adaptable-page-header-wrapper"),aboveHeader=document.getElementById("header1");aboveHeader||(aboveHeader=document.getElementById("header2"));var courseIndex=document.getElementById("theme_adaptable-drawers-courseindex"),sidePost=document.getElementById("theme_adaptable-drawers-sidepost"),drawerTogglers=document.getElementsByClassName("drawer-toggler"),page=document.getElementById("page"),pageScrollTop=page.scrollTop,currentPageScrollTop=pageScrollTop,headerHeight=0,headerNoNavbar=0,navbarHeight=0;null!==navbar&&(navbarHeight=navbar.getBoundingClientRect().height);var aboveHeaderHeight=aboveHeader.getBoundingClientRect().height,drawerPaddingTop=0,newDrawerPaddingTop=0,pageMarginTop=0,newPageMarginTop=0,headerTop=0,newHeaderTop=0,isFixed=0;windowWidth<screenmd?(header.classList.remove("sticky"),body.addClass("page-header-margin"),isFixed=1):(header.classList.add("sticky"),body.removeClass("page-header-margin")),$(window).resize((function(){(windowWidth=$(window).width())<screensm?1!=currentWindowSize&&(makeNavbarSticky(!0),currentWindowSize=1):windowWidth<screenmd?2!=currentWindowSize&&(makeNavbarSticky(!0),currentWindowSize=2):(3!=currentWindowSize&&(currentWindowSize=3),makeNavbarSticky(!0)),windowWidth<screenmd?0===isFixed&&(header.classList.remove("sticky"),body.addClass("page-header-margin"),isFixed=1):1===isFixed&&(header.classList.add("sticky"),body.removeClass("page-header-margin"),isFixed=0)}));var makeNavbarSticky=function(){let update=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(pageScrollTop=page.scrollTop,windowWidth<screenmd){if(!update&&currentPageScrollTop==aboveHeaderHeight&&pageScrollTop>=aboveHeaderHeight)return;pageScrollTop=aboveHeaderHeight,newHeaderTop=0,newPageMarginTop=0}else{if(!update&&currentPageScrollTop==headerNoNavbar&&pageScrollTop>=headerNoNavbar)return;update&&(headerHeight=header.getBoundingClientRect().height,null!==navbar&&(navbarHeight=navbar.getBoundingClientRect().height),headerNoNavbar=headerHeight-navbarHeight),pageScrollTop>headerNoNavbar&&(pageScrollTop=headerNoNavbar),newHeaderTop=-pageScrollTop,newPageMarginTop=headerHeight-pageScrollTop}if(currentPageScrollTop=pageScrollTop,(update||newHeaderTop!=headerTop)&&(header.style.top=newHeaderTop+"px",headerTop=newHeaderTop),(update||newPageMarginTop!=pageMarginTop)&&(page.style.marginTop=newPageMarginTop+"px",pageMarginTop=newPageMarginTop),(courseIndex||sidePost)&&(newDrawerPaddingTop=windowWidth<screenmd?0:headerHeight-pageScrollTop,(update||newDrawerPaddingTop!=drawerPaddingTop)&&(drawerPaddingTop=newDrawerPaddingTop,courseIndex&&(courseIndex.style.paddingTop=drawerPaddingTop+"px"),sidePost&&(sidePost.style.paddingTop=drawerPaddingTop+"px"),courseIndex||sidePost)))if(windowWidth<screenmd)for(let dt=0;dt<drawerTogglers.length;dt++)drawerTogglers[dt].style.top=null;else for(let dt=0;dt<drawerTogglers.length;dt++)drawerTogglers[dt].style.top=drawerPaddingTop+22+"px"};makeNavbarSticky(!0),page.onscroll=function(){makeNavbarSticky()}}$(".moodlewidth").click((function(){body.hasClass("fullin")?(body.removeClass("fullin"),AdaptableUtil.setUserPreference("theme_adaptable_full","nofull")):(body.addClass("fullin"),AdaptableUtil.setUserPreference("theme_adaptable_full","fullin"))})),$("#openoverlaymenu").click((function(){$("#conditionalmenu").toggleClass("open")})),$("#overlaymenuclose").click((function(){$("#conditionalmenu").toggleClass("open")})),$(".dropdown-menu a.dropdown-toggle").on("click",(function(){var $el=$(this),$parent=$(this).offsetParent(".dropdown-menu");return $(this).next().hasClass("show")||$(this).parents(".dropdown-menu").first().find(".show").removeClass("show"),$(this).next(".dropdown-menu").toggleClass("show"),$(this).parent("li").toggleClass("show"),$(this).parents("li.nav-item.dropdown.show").on("hidden.bs.dropdown",(function(){$(".dropdown-menu .show").removeClass("show")})),$parent.parent().hasClass("navbar-nav")||$el.next().css({top:$el[0].offsetTop,left:$parent.outerWidth()-4}),!1}))})),data.stickynavbar){var shiftWindow=function(){scrollBy(0,-50)};location.hash&&shiftWindow(),window.addEventListener("hashchange",shiftWindow)}}}}));

//# sourceMappingURL=bsoptions.min.js.map