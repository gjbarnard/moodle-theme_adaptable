{"version":3,"file":"collapseblock.min.js","sources":["../src/collapseblock.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n//\n// Collapse block.\n//\n// @module     theme_adaptable/collapseblock\n// @copyright  2023 G J Barnard.\n// @author     G J Barnard -\n//               {@link https://moodle.org/user/profile.php?id=442195}\n//               {@link https://gjbarnard.co.uk}\n// @license    https://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later.\n//\n\nimport $ from 'jquery';\nimport * as AdaptableUtil from 'theme_adaptable/util';\nimport log from 'core/log';\n\n/**\n * Collapse Block class.\n */\nclass CollapseBlock {\n    static noInit = true;\n\n    static collapseBlock() {\n        if (CollapseBlock.noInit) {\n            CollapseBlock.noInit = false;\n            $('.block-collapsible').click(function() {\n                var instanceId = $(this).data('instance-id');\n                var blockInstance = $('#inst' + instanceId);\n\n                $('#inst' + instanceId + ' .content').slideToggle('slow', function() {\n                    if (blockInstance.hasClass('hidden')) {\n                        blockInstance.removeClass('hidden');\n                        AdaptableUtil.setUserPreference('block' + instanceId + 'hidden', 0);\n                    } else {\n                        blockInstance.addClass('hidden');\n                        AdaptableUtil.setUserPreference('block' + instanceId + 'hidden', 1);\n                    }\n                });\n            });\n            log.debug('Adaptable Collapse Block ES6 collapseBlock');\n        }\n    }\n}\n\n/**\n * Init.\n */\nexport const collapseBlockInit = () => {\n    if (document.readyState !== 'loading') {\n        CollapseBlock.collapseBlock();\n    } else {\n        document.addEventListener('DOMContentLoaded', function () {\n            CollapseBlock.collapseBlock();\n        });\n    }\n};\n"],"names":["_getRequireWildcardCache","e","WeakMap","r","t","_interopRequireDefault","__esModule","default","_jquery","AdaptableUtil","has","get","n","__proto__","a","Object","defineProperty","getOwnPropertyDescriptor","u","hasOwnProperty","call","i","set","_interopRequireWildcard","_log","CollapseBlock","static","collapseBlock","noInit","$","click","instanceId","this","data","blockInstance","slideToggle","hasClass","removeClass","setUserPreference","addClass","log","debug","_exports","collapseBlockInit","document","readyState","addEventListener"],"mappings":"6IA4B2B,SAAAA,yBAAAC,GAAA,GAAA,mBAAAC,QAAA,OAAA,KAAA,IAAAC,EAAAD,IAAAA,QAAAE,EAAAF,IAAAA,eAAAF,yBAAA,SAAAC,GAAAA,OAAAA,EAAAG,EAAAD,IAAAF,EAAA,CAAA,SAAAI,uBAAAJ,GAAAA,OAAAA,GAAAA,EAAAK,WAAAL,EAAAM,CAAAA,QAAAN,EAAA;;0FAF3BO,QAAAH,uBAAAG,SACAC,cAC2B,SAAAR,EAAAE,GAAAA,IAAAA,GAAAF,GAAAA,EAAAK,WAAAL,OAAAA,EAAAA,GAAAA,OAAAA,GAAAA,iBAAAA,GAAAA,mBAAAA,EAAAM,MAAAA,CAAAA,QAAAN,GAAAG,IAAAA,EAAAJ,yBAAAG,GAAA,GAAAC,GAAAA,EAAAM,IAAAT,GAAA,OAAAG,EAAAO,IAAAV,GAAA,IAAAW,EAAA,CAAAC,UAAA,MAAAC,EAAAC,OAAAC,gBAAAD,OAAAE,yBAAA,IAAA,IAAAC,KAAAjB,EAAAiB,GAAAA,YAAAA,GAAAC,CAAAA,EAAAA,eAAAC,KAAAnB,EAAAiB,GAAAG,CAAAA,IAAAA,EAAAP,EAAAC,OAAAE,yBAAAhB,EAAAiB,GAAAG,KAAAA,IAAAA,EAAAV,KAAAU,EAAAC,KAAAP,OAAAC,eAAAJ,EAAAM,EAAAG,GAAAT,EAAAM,GAAAjB,EAAAiB,GAAAN,OAAAA,EAAAL,QAAAN,EAAAG,GAAAA,EAAAkB,IAAArB,EAAAW,GAAAA,CAAA,CAD3BW,CAAAd,eACAe,KAAAnB,uBAAAmB,MAKA,MAAMC,cACFC,eAAgB,EAEhB,oBAAOC,GACCF,cAAcG,SACdH,cAAcG,QAAS,GACvB,EAAAC,iBAAE,sBAAsBC,OAAM,WAC1B,IAAIC,YAAa,EAAAF,QAACtB,SAACyB,MAAMC,KAAK,eAC1BC,eAAgB,EAAAL,QAAAA,SAAE,QAAUE,aAEhC,EAAAF,QAACtB,SAAC,QAAUwB,WAAa,aAAaI,YAAY,QAAQ,WAClDD,cAAcE,SAAS,WACvBF,cAAcG,YAAY,UAC1B5B,cAAc6B,kBAAkB,QAAUP,WAAa,SAAU,KAEjEG,cAAcK,SAAS,UACvB9B,cAAc6B,kBAAkB,QAAUP,WAAa,SAAU,GAEzE,GACJ,IACAS,KAAAA,QAAIC,MAAM,8CAElB,EAcFC,SAAAC,kBAR+BA,KACD,YAAxBC,SAASC,WACTpB,cAAcE,gBAEdiB,SAASE,iBAAiB,oBAAoB,WAC1CrB,cAAcE,eAClB,GACJ,CACF"}